<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module ssm_atlas</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>ssm_atlas</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/face3d/Documents/SSM_matlab_github/python/ssm_atlas.py">/home/face3d/Documents/SSM_matlab_github/python/ssm_atlas.py</a></font></td></tr></table>
    <p><tt>Atlas&nbsp;estimation&nbsp;using&nbsp;deformetrica<br>
&nbsp;<br>
deformetrica&nbsp;estimate&nbsp;model.xml&nbsp;data-set.xml&nbsp;-p&nbsp;optimization_parameters.xml</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="create_data_set_xml.html">create_data_set_xml</a><br>
<a href="deformetrica.html">deformetrica</a><br>
<a href="glob.html">glob</a><br>
<a href="json.html">json</a><br>
</td><td width="25%" valign=top><a href="support.kernels.html">support.kernels</a><br>
<a href="logging.html">logging</a><br>
<a href="numpy.html">numpy</a><br>
<a href="vtk.util.numpy_support.html">vtk.util.numpy_support</a><br>
</td><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="readline.html">readline</a><br>
<a href="scipy.html">scipy</a><br>
<a href="subprocess.html">subprocess</a><br>
</td><td width="25%" valign=top><a href="sys.html">sys</a><br>
<a href="torch.html">torch</a><br>
<a href="visualization_tools.html">visualization_tools</a><br>
<a href="vtkmodules.all.html">vtkmodules.all</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="builtins.html#object">builtins.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="ssm_atlas.html#DeformetricaAtlasEstimation">DeformetricaAtlasEstimation</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="DeformetricaAtlasEstimation">class <strong>DeformetricaAtlasEstimation</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt><a href="#DeformetricaAtlasEstimation">DeformetricaAtlasEstimation</a>(idir='./',&nbsp;odir='output/',&nbsp;name='obj',&nbsp;initial_guess='',&nbsp;kwd=20.0,&nbsp;kwg=10.0,&nbsp;noise=10.0)<br>
&nbsp;<br>
result&nbsp;of&nbsp;an&nbsp;DeterministicAtlas&nbsp;estimation<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="DeformetricaAtlasEstimation-__init__"><strong>__init__</strong></a>(self, idir='./', odir='output/', name='obj', initial_guess='', kwd=20.0, kwg=10.0, noise=10.0)</dt><dd><tt>Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-check_initialisation"><strong>check_initialisation</strong></a>(self)</dt><dd><tt>check&nbsp;that&nbsp;the&nbsp;input&nbsp;paths&nbsp;exist</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-convolve_momentum"><strong>convolve_momentum</strong></a>(self, m, x)</dt><dd><tt>kernel&nbsp;convolution&nbsp;of&nbsp;momenta&nbsp;at&nbsp;points&nbsp;x<br>
m&nbsp;:&nbsp;np.array&nbsp;K,&nbsp;3,&nbsp;&nbsp;K=number&nbsp;of&nbsp;controls&nbsp;points,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ex:&nbsp;m=self.<strong>momenta</strong>[0,:],&nbsp;m=get_eigv(0)<br>
kw:&nbsp;float,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kernel&nbsp;width<br>
x&nbsp;:&nbsp;np.array&nbsp;N,&nbsp;3,&nbsp;&nbsp;coordinates</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-create_dataset_xml"><strong>create_dataset_xml</strong></a>(self)</dt><dd><tt>with&nbsp;every&nbsp;vtk&nbsp;files&nbsp;in&nbsp;idir</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-estimate"><strong>estimate</strong></a>(self, xml_params=None, do_keep_all=False)</dt><dd><tt>estimate&nbsp;atlas<br>
xml_params&nbsp;is&nbsp;a&nbsp;dictionary&nbsp;used&nbsp;to&nbsp;overwrite&nbsp;xml_arameters&nbsp;attributes<br>
ex:<br>
xml_params&nbsp;=&nbsp;{"memory_length":1,&nbsp;"initial_step_size":1e-4,&nbsp;"freeze_control_points":False,&nbsp;"freeze_control_points":False}<br>
==&gt;<br>
xml_parameters.memory_length&nbsp;=&nbsp;1<br>
xml_parameters.initial_step_size&nbsp;=&nbsp;1e-4<br>
xml_parameters.freeze_template&nbsp;=&nbsp;True<br>
xml_parameters.freeze_control_points&nbsp;=&nbsp;False</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-get_path_data"><strong>get_path_data</strong></a>(self, k)</dt><dd><tt>path&nbsp;of&nbsp;data&nbsp;of&nbsp;subject&nbsp;k</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-load_parameters"><strong>load_parameters</strong></a>(self, fjson)</dt><dd><tt>loading&nbsp;parameters&nbsp;from&nbsp;a&nbsp;json</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-momenta_from_sbj_to_atlas"><strong>momenta_from_sbj_to_atlas</strong></a>(self, sbj, odir, do_warpback=False)</dt><dd><tt>forward-backward&nbsp;shooting&nbsp;to&nbsp;invert&nbsp;the&nbsp;atlas-subject&nbsp;deformation<br>
sbj&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subject&nbsp;id&nbsp;(int)<br>
&nbsp;<br>
return&nbsp;file_moment,&nbsp;file_ctrlpts</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-read_ctrlpoints"><strong>read_ctrlpoints</strong></a>(self)</dt></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-read_momenta"><strong>read_momenta</strong></a>(self)</dt><dd><tt>read&nbsp;the&nbsp;momenta&nbsp;file,&nbsp;first&nbsp;line&nbsp;contain&nbsp;the&nbsp;shape</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-read_template"><strong>read_template</strong></a>(self)</dt><dd><tt>return&nbsp;polydata&nbsp;of&nbsp;the&nbsp;template</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-registration"><strong>registration</strong></a>(self, fmesh, odir, subject_id='subj')</dt><dd><tt>register&nbsp;a&nbsp;(new)&nbsp;subject&nbsp;to&nbsp;the&nbsp;template<br>
do&nbsp;not&nbsp;require:&nbsp;idir,&nbsp;initial_guess</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-render_momenta_norm"><strong>render_momenta_norm</strong></a>(self, moments)</dt><dd><tt>render&nbsp;the&nbsp;norm&nbsp;of&nbsp;the&nbsp;momenta&nbsp;on&nbsp;the&nbsp;template&nbsp;geometry</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-save_controlpoints_vtk"><strong>save_controlpoints_vtk</strong></a>(self, fname='controlpoints.vtk', X=None)</dt><dd><tt>save&nbsp;controlpoints&nbsp;(could&nbsp;add&nbsp;some&nbsp;momenta&nbsp;X&nbsp;(n,&nbsp;d))&nbsp;as&nbsp;vtk&nbsp;point&nbsp;cloud</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-save_parameters"><strong>save_parameters</strong></a>(self)</dt><dd><tt>printing&nbsp;parameters&nbsp;in&nbsp;a&nbsp;json&nbsp;for&nbsp;future&nbsp;use&nbsp;if&nbsp;need&nbsp;be</tt></dd></dl>

<dl><dt><a name="DeformetricaAtlasEstimation-shooting"><strong>shooting</strong></a>(self, fv, odir, tmin=-5, tmax=5, do_keep_all=False)</dt><dd><tt>warp&nbsp;Atlas&nbsp;using&nbsp;momenta&nbsp;in&nbsp;fv<br>
interesting&nbsp;momenta&nbsp;are&nbsp;in&nbsp;DeterministicAtlas__EstimatedParameters__Momenta.txt<br>
or&nbsp;given&nbsp;by&nbsp;pca&nbsp;using&nbsp;save_eigv</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>logger</strong> = &lt;Logger ssm_atlas (INFO)&gt;</td></tr></table>
</body></html>